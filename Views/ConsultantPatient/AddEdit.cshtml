@model HMS.Models.PatientMasterModel
@{

    Layout = "~/Views/Shared/_CounsultantLayout.cshtml";
    HMS.Common.EncryptDecrypt encryptDecrypt = new HMS.Common.EncryptDecrypt();

    string Action = ViewContext.RouteData.Values["action"].ToString();
    string Controller = ViewContext.RouteData.Values["controller"].ToString();
}
@if (TempData["Temp_Error"] != null)
{

}


<!--  Page-header opened -->
<div class="page-header">
    <ol class="breadcrumb"
        <li class="breadcrumb-item"><a href="#"><i class="fe fe-life-buoy mr-1"></i>Manage Consultant Patient</a></li>
        @* <li class="breadcrumb-item active" aria-current="page">Profile</li> *@
    </ol>

</div>
<!--  Page-header closed -->
<!-- row opened -->

<!-- row closed -->



<div class="row" >
    <div class="col-xl-12">
        <div class="card">
            @using (Html.BeginForm(Action, Controller, FormMethod.Post, new { area = Model.Area, id = "AddEditForm" }))
            {
                if (@Model.Id > 0)
                {
                    <div class="row" id="user-profile">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="wideget-user">
                                        <div class="row">
                                            <div class="col-lg-12 col-xl-6 col-md-12">
                                                <div class="wideget-user-desc d-flex">
                                                    @* <div class="wideget-user-img">
                                            <img class="" src="../assets/images/users/2.jpg" alt="img">
                                            </div> *@
                                                    <div class="user-wrap mt-lg-0">
                                                        <h4>@Model.Fname  @Model.Lname</h4>
                                                        <h6 class="text-muted mb-3 font-weight-normal"> UHID : @Model.UHID</h6>
                                                        <h6 class="text-muted mb-3 font-weight-normal"> Consultant Name : @Model.UserName</h6>
                                                        <h6 class="text-muted mb-3 font-weight-normal">                                                           
                                                            Visit Time: @{
                                                                var eDate = Convert.ToDateTime(Model.EntryDateTime).ToString("dd/MM/yyyy hh:mm tt");
                                                            } @eDate
                                                        </h6>
                                                        @*   <h6 class="text-muted mb-3 font-weight-normal">: @Model.EntryDateTime </h6>
                                                <h6 class="text-muted mb-3 font-weight-normal">Visit Time: @Model.EntryDateTime </h6> *@
                                                        @*   <a href="#" class="btn btn-primary mt-1 mb-1"><i class="fa fa-rss"></i> Follow</a>
                                                <a href="#" class="btn btn-secondary mt-1 mb-1"><i class="fa fa-envelope"></i> E-mail</a> *@
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="border-top">
                                    <div class="wideget-user-tab p-4">
                                        <div class="tab-menu-heading">
                                            <div class="tabs-menu1">
                                                <ul class="nav">
                                                    <li class=""><a href="#tab-51" class="active show" data-toggle="tab">Profile</a></li>
                                                    @* <li><a href="#tab-61" data-toggle="tab" class="">Address</a></li>
                                                    <li><a href="#tab-71" data-toggle="tab" class="">General Details</a></li> *@
                                                    <li><a href="#tab-61" data-toggle="tab" class="">Consultant Details</a></li>
                                                    <li><a href="#tab-71" data-toggle="tab" class="">Remarks</a></li>
                                                    <li><a href="#tab-81" data-toggle="tab" class="">Services</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="border-0">
                                        <div class="tab-content">
                                            <div class="tab-pane active show" id="tab-51">
                                                <div id="profile-log-switch">
                                                    <div class="table-responsive mb-5">
                                                        <table class="table row table-borderless w-100 m-0 border">
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>Full Name :</strong> @Model.Fname @Model.Lname</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Blood Group :</strong> @Model.BloodGroup</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Gender :</strong> @Model.Gender</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>DOB :</strong> @Model.DOB.ToString("dd/MM/yyyy")</td>
                                                                </tr>
                                                            </tbody>
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>Occupation :</strong> @Model.Occupation</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Age :</strong> @Model.Age</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Email :</strong> @Model.Email</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Phone :</strong> @Model.ContactNo</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            
                                                <div id="profile-log-switch"> 
                                                    <div class="table-responsive mb-5">
                                                        <table class="table row table-borderless w-100 m-0 border">
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>Address :</strong> @Model.Address</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>State :</strong> @Model.State</td>
                                                                </tr>

                                                            </tbody>
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>City :</strong> @Model.City</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>PinCode :</strong> @Model.Pincode</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                 </div>
                                           
                                                <div id="profile-log-switch"> 
                                                     <div class="table-responsive mb-5">
                                                        <table class="table row table-borderless w-100 m-0 border">
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>Temperature :</strong> @Model.Temperature</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Weight :</strong> @Model.Weight</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Remark :</strong> @Model.Remark</td>
                                                                </tr>

                                                            </tbody>
                                                            <tbody class="col-lg-6 p-0">
                                                                <tr>
                                                                    <td><strong>Adhar Card No :</strong> @Model.AdharCard</td>
                                                                </tr>
                                                                <tr>
                                                                    <td><strong>Blood Pressure :</strong> @Model.Bloodpressure</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                 </div>
                                            </div>
                                            <div class="tab-pane" id="tab-61">
                                                <div class="wideget-user-followers row">
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="mb-5 border">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/8.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">John Paige</b>
                                                                    <p class="text-muted ">johnpaig@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="mb-5 border">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/2.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">Lillian Quinn</b>
                                                                    <p class="text-muted ">lillianquinn@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="mb-5 border">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/3.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">Irene Harris</b>
                                                                    <p class="text-muted ">ireneharris@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="mb-5 border">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/11.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">Harry Fisher</b>
                                                                    <p class="text-muted ">harryfisher@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="mb-5 border mb-xl-0">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/9.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">Eloy Tunen</b>
                                                                    <p class="text-muted ">eloytunen@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6">
                                                        <div class="border mb-5 mb-xl-0">
                                                            <div class="media overflow-visible">
                                                                <a class="media-left" href="javascript:;"><img alt="" class="avatar avatar-md brround" src="../assets/images/users/6.jpg"></a>
                                                                <div class="media-body valign-middle">
                                                                    <b class="text-inverse fs-15">Charlott Ashern</b>
                                                                    <p class="text-muted ">charlottashern@gmail.com</p>
                                                                </div>
                                                                <div class="media-body valign-middle text-right overflow-visible mt-2">
                                                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> Follow </button>
                                                                    <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                                                        <li><a href="#">View profile</a></li>
                                                                        <li><a href="#">Follow</a></li>
                                                                        <li><a href="#">Message</a></li>
                                                                        <li><a href="#">Suggestion</a></li>
                                                                        <li><a href="#">Un friend</a></li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="tab-pane" id="tab-71">
                                                <div id="profile-log-switch">
                                                    <div class="table-responsive mb-5">
                                                        @using (Html.BeginForm("AddEditPatientInitialAssessment", "ConsultantPatient", FormMethod.Post, new { id = "RemakeForm" }))
                                                        {
                                                            <table class="table row table-borderless w-100 m-0 border">
                                                                <tbody class="col-lg-6 p-0">
                                                                    @Html.HiddenFor(Model=>Model.Id)
                                                                    <tr>

                                                                        <td>
                                                                            <strong>Chief Complaints </strong>
                                                                            @Html.TextBoxFor(Model => Model.ChiefComplaints, new { @class = "form-control", @id = "ChiefComplaints" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Present Illness </strong>
                                                                            @Html.TextBoxFor(Model => Model.PresentIllness, new { @class = "form-control", @id = "PresentIllness" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Past History :</strong>
                                                                            @Html.TextBoxFor(Model => Model.PastHistory, new { @class = "form-control", @id = "PastHistory" })
                                                                        </td>

                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Remake :</strong>
                                                                            @Html.TextBoxFor(Model => Model.Remake, new { @class = "form-control", @id = "Remake" })
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                                <tbody class="col-lg-6 p-0">
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Future History :</strong>
                                                                            @Html.TextBoxFor(Model => Model.FutureHistory, new { @class = "form-control", @id = "FutureHistory" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Personal History :</strong>
                                                                            @Html.TextBoxFor(Model => Model.PersonalHistory, new { @class = "form-control", @id = "PersonalHistory" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <strong>Travel History :</strong>
                                                                            @Html.TextBoxFor(Model => Model.TravelHistory, new { @class = "form-control", @id = "TravelHistory" })
                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>
                                                                            <a href="#" class="btn btn-secondary" id="btnReset1">Reset</a>
                                                                            <button class="btn btn-primary" id="btnSubmit1">Save Remake</button>

                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        }
                                                        
                                                    </div>

                                                </div>
                                            </div>
                                            
                                            <div class="tab-pane" id="tab-81">
                                                <div id="profile-log-switch">
                                                    @* <div class="table-responsive mb-5"> *@
                                                    @using (Html.BeginForm("AddEditPatientServiceDetails", "ConsultantPatient", FormMethod.Post, new { id = "ServiceForm" }))
                                                        {
                                                            <div class="row row-sm">
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">
                                                                    @Html.HiddenFor(Model => Model.Id)
                                                                @Html.LabelFor(Model => Model.Department, "Department", new { @class = "form-label" })
                                                                @Html.DropDownListFor(Model => Model.Department, new SelectList(Model.DepartmentList1, "Value", "Text", Model.Department_ID), new { @class = "form-control select2-list dropdown-validation", @id = "DepartmentDropdwon" })
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">
                                                                        @Html.LabelFor(Model => Model.ServiceHead, "Service Head", new { @class = "form-label required-label" })
                                                                        @Html.DropDownListFor(Model => Model.ServiceHead, new SelectList(Model.ServiceHeadList, "Value", "Text", Model.ServiceHead_Id), new { @class = "form-control select2-list dropdown-validation", @id = "serviceheaddropdown" })
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                <div class="form-group">
                                                                        @Html.LabelFor(Model => Model.Service, "Service", new { @class = "form-label required-label" })
                                                                    @Html.DropDownListFor(Model => Model.Service, new SelectList(Model.ServiceList, "Value", "Text", Model.ServiceId), new { @class = "form-control select2-list dropdown-validation", @id = "ServiceDropdwon", onchange = "getServiceChargesList()" })
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                <div class="form-group">
                                                                        @Html.LabelFor(Model => Model.Charges, "Charges", new { @class = "form-label" })
                                                                    @Html.TextBoxFor(Model => Model.Charges, new { @class = "form-control", @id = "Charges", @readonly = "readonly" })
                                                                </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                <div class="form-group" >
                                                                        @Html.LabelFor(Model => Model.Discount, "Discount", new { @class = "form-label" })
                                                                    @Html.TextBoxFor(Model => Model.Discount, new { @class = "form-control", @id = "Discount", onchange = "calculateAmountsSingle()", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                            </div>
                                                                </div>

                                                                <div class="col-lg-4">
                                                                <div class="form-group">
                                                                        @Html.LabelFor(Model => Model.NetAmount, "Net Amount ", new { @class = "form-label" })
                                                                        @Html.TextBoxFor(Model => Model.NetAmount, new { @class = "form-control", @id = "NetAmount", @readonly = "readonly" })                                                                        
                                                                    </div>
                                                                </div>                                                               
                                                                
                                                            </div>
                                                            <div class="form-group mb-0 justify-content-end">
                                                                <div class="checkbox">
                                                                    <div class="custom-checkbox custom-control">
                                                                        <input type="checkbox" class="custom-control-input" id="ischeckmultiple" name="ischeckmultiple">
                                                                        <label for="ischeckmultiple" class="custom-control-label mt-1">If you select multiple service then check checkbox</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        <div id="multipledataview" style="display:none">
                                                            @Html.Partial("_ConsultantPatientServiceDetail", Model.serviceMasterLists)
                                                        </div>
                                                            <div class="row row-sm">
                                                                <div class="col-lg-12 justify-content-center" id="btnresertandbtnsubmit">
                                                                    <a href="@Url.Action("Index","ConsultantPatient")" class="btn btn-info" id="btnBack" value="Reset">Back</a>
                                                                @* <button class="btn btn-primary" id="btnSubmit2" >Save Service</button> *@
                                                                <button class="btn btn-primary" id="btnSubmit2">Save Service</button>

                                                                </div>
                                                            </div>
                                                        }

                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                           
                        </div><!-- col end -->
                    @* </div> *@
                }
                else
                {
                    <div class="row">
                        <div class="col-md-12 col-xl-12 col-xs-12 col-sm-12">
                            <!--div-->
                            <div class="card">
                                <div class="card-body">
                                    <div class="main-content-label mg-b-5">
                                        Patient
                                    </div>
                                    <p class="mg-b-20"></p>
                                    <div class="row row-sm">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.EntryDateTime, "Entry DateTime", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.EntryDateTime, "{0:yyyy-MM-ddTHH:mm}", new { @class = "form-control", @type = "datetime-local", @id = "EntryDateTime" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.EntryDateTime)</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row row-sm">
                                        @if (Model.Id > 0)
                                        {
                                            <div class="col-lg-4">
                                                <div class="form-group">

                                                    @Html.LabelFor(Model => Model.ReceiptNo, "Receipt No.", new { @class = "form-label" })
                                                    @Html.TextBoxFor(Model => Model.ReceiptNo, new { @class = "form-control", @id = "ReceiptNo" })
                                                </div>
                                            </div>
                                        }
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.HiddenFor(Model => Model.Id)
                                                @Html.LabelFor(Model => Model.Fname, "First Name", new { @class = "form-label required-label" })
                                                @Html.TextBoxFor(Model => Model.Fname, new { @class = "form-control", @id = "Fname", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Fname)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Lname, "Last Name", new { @class = "form-label required-label" })
                                                @Html.TextBoxFor(Model => Model.Lname, new { @class = "form-control", @id = "Lname", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Lname)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Father_HusbandName, "Father/Husband Name ", new { @class = "form-label  required-label" })
                                                @Html.TextBoxFor(Model => Model.Father_HusbandName, new { @class = "form-control", @id = "Father_HusbandName", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Father_HusbandName)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.MotherName, "Mother Name ", new { @class = "form-label  required-label" })
                                                @Html.TextBoxFor(Model => Model.MotherName, new { @class = "form-control", @id = "MotherName", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.MotherName)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.MaritalStatus, new { @class = "form-label" })
                                                @Html.DropDownListFor(Model => Model.MaritalStatus, new SelectList(Model.MaritalStatusList, "Value", "Text"), new { @class = "form-control select2-list dropdown-validation" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.BloodGroup, new { @class = "form-label " })
                                                @Html.DropDownListFor(Model => Model.BloodGroup, new SelectList(Model.BloodGroupList, "Value", "Text"), new { @class = "form-control select2-list dropdown-validation" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Email, new { @class = "form-label  required-label" })
                                                @Html.TextBoxFor(Model => Model.Email, new { @class = "form-control", @placeholder = "Example:aaa@gmail.com" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Email)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.ContactNo, "Contact No", new { @class = "form-label  required-label" })
                                                @Html.TextBoxFor(Model => Model.ContactNo, new { @class = "form-control", @maxlength = "10", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.ContactNo)</p>
                                            </div>
                                        </div>
                                        @* Thiscondition is use to Set DOB for mate to Add/Edit time *@
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.DOB, "Date Of Birth", new { @class = "form-label  required-label" })
                                                @if (Model.Id > 0)
                                                {
                                                    @Html.TextBoxFor(Model => Model.DOB, "{0:yyyy-MM-dd}", new { @class = "form-control", @type = "Date", @id = "DOB", onchange = "calculateAge()" })
                                                }
                                                else
                                                {
                                                    @Html.TextBoxFor(Model => Model.DOB, "{0:dd-MM-yyyy}", new { @class = "form-control", @type = "Date", @id = "DOB", onchange = "calculateAge()" })
                                                }
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.DOB)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Age, new { @class = "form-label " })
                                                @Html.TextBoxFor(Model => Model.Age, new { @class = "form-control", @id = "Age", @readonly = "readonly" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Age)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Gender, new { @class = "form-label" })
                                                @Html.DropDownListFor(Model => Model.Gender, new SelectList(Model.GenderList, "Value", "Text"), new { @class = "form-control select2-list dropdown-validation" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Nationality, "Nationality ", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Nationality, new { @class = "form-control", @id = "Nationality", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Nationality)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Occupation, "Occupation ", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Occupation, new { @class = "form-control", @id = "Occupation", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Occupation)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Active, new { @class = "form-label" })
                                                @Html.DropDownListFor(Model => Model.Active, new SelectList(Model.lstStatus, "Value", "Text"), new { @class = "form-control select2-list dropdown-validation" })

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-body">
                                    <div class="main-content-label mg-b-5">
                                        Address Details
                                    </div>
                                    <div class="row row-sm">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Address, new { @class = "form-label" })
                                                @Html.TextAreaFor(Model => Model.Address, new { @class = "form-control" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Address)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Houseno, "House No", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Houseno, new { @class = "form-control", @id = "Houseno " })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Houseno)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                            </div>
                                                @Html.LabelFor(Model => Model.Area, "Area", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Area, new { @class = "form-control", @id = "Area", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Area)</p> *@
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.City, new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.City, new { @class = "form-control", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.City)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.State, new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.State, new { @class = "form-control", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.State)</p> *@
                                            </div>
                                        </div>

                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.District, "District ", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.District, new { @class = "form-control", @id = "District ", @oninput = "this.value = this.value.replace(/[^A-Za-z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.District)</p> *@
                                            </div>
                                        </div>

                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Pincode, new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Pincode, new { @class = "form-control", @maxlength = "6", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Pincode)</p> *@
                                            </div>
                                        </div>
                                    </div>
                                   
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-body">
                                    <div class="main-content-label mg-b-5">
                                        Patient General Details
                                    </div>
                                    <div class="row row-sm">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Temperature, "Temperature", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Temperature, new { @class = "form-control" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Temperature)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.AdharCard, "Adhar Card No.", new { @class = "form-label required-label" })
                                                @Html.TextBoxFor(Model => Model.AdharCard, new { @class = "form-control", @id = "AdharCard ", @maxlength = "12", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.AdharCard)</p>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Weight, "Weight", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Weight, new { @class = "form-control", @id = "Weight", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Weight)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Bloodpressure, "Blood Pressure", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Bloodpressure, new { @class = "form-control", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Bloodpressure)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Remark, "Remark", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Remark, new { @class = "form-control" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Remark)</p> *@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <div class="main-content-label mg-b-5">
                                        Patient Consultantion Details
                                    </div>
                                    <div class="row row-sm">
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Departments, new { @class = "form-label " })
                                                @Html.DropDownListFor(Model => Model.Departments, new SelectList(Model.departmentList, "Value", "Text", Model.Department_id), new { @class = "form-control select2-list dropdown-validation", @id = "DepartmentDropdwonList" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.User_id, "Name", new { @class = "form-label required-label" })
                                                @Html.DropDownListFor(Model => Model.User_id, new SelectList(Model.User_DesignationList, "Value", "Text", Model.User_id), new { @class = "form-control select2-list dropdown-validation", @id = "userdropdownList", onchange = "getConsultantCharges()" })
                                                <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.User_id)</p>
                                            </div>
                                        </div>

                                        <div class="col-lg-4" style="display:none">
                                            <div class="form-group">
                                                <label class="">Consultant Code</label>
                                                <input type="text" id="txtCode" class="form-control" readonly="readonly" value="@ViewBag.Consultant_Code" />
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Consultant_Charges)</p> *@
                                            </div>
                                        </div>

                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Consultant_Charges, "Consultant Charges", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Consultant_Charges, new { @class = "form-control", @id = "Consultant_Charges1", @readonly = "readonly" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Consultant_Charges)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.Discount1, "Discount", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.Discount1, new { @class = "form-control", @id = "Discount1", onchange = "calculateAmounts()", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.Discount)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.RefundAmount, "Refund Amount", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.RefundAmount, new { @class = "form-control", @id = "RefundAmount1", onchange = "calculateAmounts()", @oninput = "this.value = this.value.replace(/[^0-9]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.RefundAmount)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.TotalAmount, "Total Amount ", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.TotalAmount, new { @class = "form-control", @readonly = "readonly" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.TotalAmount)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.RefBy_Name, "RefBy:Name", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.RefBy_Name, new { @class = "form-control", @id = "RefBy_Name", @oninput = "this.value = this.value.replace(/[^a-zA-Z]/g, '')" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.RefBy_Name)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.RefBy_Address, "RefBy:Address", new { @class = "form-label" })
                                                @Html.TextBoxFor(Model => Model.RefBy_Address, new { @class = "form-control" })
                                                @* <p class="text-danger margin-bottom-0"> @Html.ValidationMessageFor(Model => Model.RefBy_Address)</p> *@
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.LabelFor(Model => Model.PaymentMode, new { @class = "form-label" })
                                                @Html.DropDownListFor(Model => Model.PaymentMode, new SelectList(Model.PaymentModeList, "Value", "Text"), new { @class = "form-control select2-list dropdown-validation" })
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="form-group">
                                                @Html.RadioButtonFor(Model => Model.Patient_Charges, true, new { @id = "Patient_Charges", @name = "Emergency Charges", onclick = "getEmergencyCharges()" }) Emergency Charges
                                            </div>
                                            <div class="form-group">
                                                @Html.RadioButtonFor(Model => Model.Patient_Charges, false, new { @id = "Patient_Charges", @name = "Night Charges", onclick = "getNightCharges()" }) Night Charges
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row row-sm">
                                        <div class="col-lg-12 justify-content-center">
                                            <a href="@Url.Action("Index","ConsultantPatient")" class="btn btn-info" id="btnBack" value="Reset">Back</a>
                                            <a href="#" class="btn btn-secondary" id="btnReset" value="Reset">Reset</a>
                                            <button class="btn btn-primary" id="btnSubmit" value="Submit">Save</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--/div-->
                    </div>
                }


                <input type="hidden" id="@Model.EmergencyAdminssion" />
                <input type="hidden" id="@Model.FileChargesApplicable" />
            }
        </div>
    </div>
</div>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- jQuery Validation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
<!-- jQuery Unobtrusive Validation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <script>
    $(document).ready(function () {
        $('#btnSubmit2').click(function () {
            event.preventDefault(); // Prevent the default form submission
            
            // Serialize form data
            var formData = $('#ServiceForm').serialize();
            console.log(formData);
            // Send data via AJAX to the controller
            $.ajax({
                url: '/ConsultantPatient/AddEditPatientServiceDetails', // URL of your controller's action
                type: 'POST',
                data: formData,
                success: function (response) {
                    // Handle success
                    alert('Service saved successfully!');
                },
                error: function (xhr, status, error) {
                    
                    // Handle error
                    console.error('Error saving service:', error);
                    alert('An error occurred while saving the service.');
                }
            });
        });
    });
    $(document).ready(function () {
        $('#btnSubmit1').click(function () {
            event.preventDefault(); // Prevent the default form submission
            
            // Serialize form data from the form with ID "RemakeForm"
            var serializedFormData = $('#RemakeForm').serialize();
            // Additional data to append to the serialized form data
            var additionalData = {
                Patient_Id: @Model.Id,
                ChiefComplaints: $('#ChiefComplaints').val(),
                PresentIllness: $('#PresentIllness').val(),
                PastHistory: $('#PastHistory').val(),
                Remake: $('#Remake').val(),
                FutureHistory: $('#FutureHistory').val(),
                PersonalHistory: $('#PersonalHistory').val(),
                TravelHistory: $('#TravelHistory').val()
            };
            // Convert additionalData object to query string
            var additionalDataStr = $.param(additionalData);

            // Append additional data to the serialized form data
            var formData = serializedFormData + '&' + additionalDataStr;

            // var formData = $('#RemakeForm').serialize();
            console.log(formData);
            // Send data via AJAX to the controller
            $.ajax({
                url: '/ConsultantPatient/AddEditPatientInitialAssessment', // URL of your controller's action
                type: 'POST',
                data: formData,
                success: function (response) {
                    // Handle success
                    alert('Remake saved successfully!');
                },
                error: function (xhr, status, error) {
                    // Handle error
                }
            });
        });
    });

    $(document).ready(function () {
        $("#btnReset1").click(function (event) {
            event.preventDefault(); // Prevent the default action of the link
            
            // Clear validation messages
            $("#ChiefComplaints").val("");
            $("#PresentIllness").val("");
            $("#PastHistory").val("");
            $("#Remake").val("");
            $("#FutureHistory").val("");
            $("#PersonalHistory").val("");
            $("#TravelHistory").val("");
        });
    });
    
  
    $("#btnReset").click(function () {
        // Reset the form fields
        document.getElementById("AddEditForm").reset();

        // Clear validation messages
        $(".text-danger").text("");


    });
        
        document.getElementById('btnSubmit').addEventListener('click', function (event) {
            var Fname = document.getElementById('Fname').value.trim();
            if (Fname === '') {
                document.getElementById('FnameError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('FnameError').style.display = 'none';

            }

            var Lname = document.getElementById('Lname').value.trim();
            if (Lname === '') {
                document.getElementById('LnameError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('LnameError').style.display = 'none';
            }

            var Father_HusbandName = document.getElementById('Father_HusbandName').value.trim();
            if (Father_HusbandName === '') {
                document.getElementById('Father_HusbandNameError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('Father_HusbandNameError').style.display = 'none';
            } var MotherName = document.getElementById('MotherName').value.trim();
            if (MotherName === '') {
                document.getElementById('MotherNameError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('MotherNameError').style.display = 'none';
            } var DOB = document.getElementById('DOB').value.trim();
            if (DOB === '') {
                document.getElementById('DOBError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('DOBError').style.display = 'none';
            }
            var AdharCard = document.getElementById('AdharCard').value.trim();
            if (AdharCard === '') {
                document.getElementById('AdharCardError').style.display = 'block';
                event.preventDefault(); // Prevent form submission
            } else {
                document.getElementById('AdharCardError').style.display = 'none';
            }
        });


    $(document).ready(function () {
        
        $('#DepartmentDropdwonList').change(function () {

            var Department_Id = $(this).val();
            console.log("Selected department ID: " + Department_Id);
            // Your AJAX call or other logic here
            $.ajax({
                url: '/UserMaster/GetBYDepartmentIdWiseUserData',
                type: 'GET',
                data: { Department_Id: Department_Id },
                success: function (data) {
                    PopulateSubProductDropDown("#userdropdownList", data)
                },
                error: function (xhr, status, error) {
                    // Handle errors
                }
            });
        });
    });

    function PopulateSubProductDropDown(dropDownId, list, selectedId) {
        $(dropDownId).empty();
        $(dropDownId).append("<option value='0'>Select</option>")
        $.each(list, function (index, row) {
            $(dropDownId).append("<option value='" + row.value + "'>" + row.text + "</option>")
        });
    }



    function getConsultantCharges() {
        
        var userId = $("#userdropdownList").val();

        // Your AJAX call or other logic here
        $.ajax({
            url: '/UserMaster/GetChargesByUserId',
            type: 'GET',
            data: { User_Id: userId },
            success: function (data) {
                $("#Consultant_Charges1").val(data.opD_Charge)
                $("#TotalAmount").val(data.opD_Charge)


            },
            error: function (xhr, status, error) {
                // Handle errors
            }
        });
    }

    @* Age Count Function *@
        function calculateAge() {
            var dob = document.getElementById('DOB').value;
            var today = new Date();
            var birthDate = new Date(dob);
            var age = today.getFullYear() - birthDate.getFullYear();
            var m = today.getMonth() - birthDate.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            document.getElementById('Age').value = age;
        }
    @* Discount Amount Count Function *@
        function calculateAmounts() {
            
            var consultantCharges = parseFloat($('#Consultant_Charges1').val());
            var discount = parseFloat($('#Discount1').val());
            var refundAmount = parseFloat($('#RefundAmount1').val());

            if (isNaN(discount)) {
                // If the discount value is NaN, set it to 0
                discount = 0;
            }
            if (isNaN(refundAmount)) {
                // If the discount value is NaN, set it to 0
                refundAmount = 0;
            }

            // Calculate the total amount
            var totalAmount = consultantCharges - discount - refundAmount;

            // Update the TotalAmount textbox with the calculated value
            $('#TotalAmount').val(totalAmount.toFixed(2));
        }


    function getEmergencyCharges() {
        var userId = $("#userdropdownList").val();
        $.ajax({
            url: '/UserMaster/GetChargesByUserId',
            type: 'GET',
            data: { User_Id: userId },
            success: function (data) {
                
                $("#Consultant_Charges1").val(data.emergency_Charge)
                $("#EmergencyAdminssion").val(true);
                $("#FileChargesApplicable").val(false);
                calculateAmounts();
            },
            error: function (xhr, status, error) { }
        });
    }
    function getNightCharges() {
        var userId = $("#userdropdownList").val();
        $.ajax({
            url: '/UserMaster/GetChargesByUserId',
            type: 'GET',
            data: { User_Id: userId },
            success: function (data) {
                
                $("#Consultant_Charges1").val(data.night_Charge);
                $("#EmergencyAdminssion").val(true);
                $("#FileChargesApplicable").val(false);
                calculateAmounts();
            },
            error: function (xhr, status, error) { }
        });
    }


    // Get the current date and time
    var currentDateTime = new Date();

    // Format the current date and time to match the expected format for datetime-local input
    var year = currentDateTime.getFullYear().toString();
    var month = (currentDateTime.getMonth() + 1).toString().padStart(2, "0");
    var day = currentDateTime.getDate().toString().padStart(2, "0");
    var hours = currentDateTime.getHours().toString().padStart(2, "0");
    var minutes = currentDateTime.getMinutes().toString().padStart(2, "0");

    // Set the default value of the datetime-local input
    document.getElementById("EntryDateTime").value = `${year}-${month}-${day} ${hours}:${minutes}`;
</script>
    <script>
    
    $("#ischeckmultiple").on('change', function () {        
        if (this.checked) {
            document.getElementById('multipledataview').style.display = 'block';
            // document.getElementById('divMasterId').style.display = 'none';
            document.getElementById('ServiceDropdwon').style.display = 'none';
            document.getElementById('Charges').style.display = 'none';
            document.getElementById('NetAmount').style.display = 'none';
            document.getElementById('Discount1').style.display = 'none';
            document.getElementById('btnresertandbtnsubmit').style.display = 'none';

        } else {
            document.getElementById('multipledataview').style.display = 'none';
            // document.getElementById('divMasterId').style.display = 'block';
            document.getElementById('ServiceDropdwon').style.display = 'block';
            document.getElementById('Charges').style.display = 'block';
            document.getElementById('NetAmount').style.display = 'block';
            document.getElementById('Discount1').style.display = 'block';
            document.getElementById('btnresertandbtnsubmit').style.display = 'block';
        }
    });
    $("#openinfomodel").on('click', function () {        
        document.getElementById('singleservicediv').style.display = 'block';
        document.getElementById('multipleservicediv').style.display = 'none';
        var serviceHead_Id = $("#serviceheaddropdown").val();
        console.log(serviceHead_Id);
        // Your AJAX call or other logic here
        $.ajax({
            url: '/ConsultantPatient/PatientServiceMasterDetails',
            type: 'GET',
            data: { serviceHead_Id: serviceHead_Id },
            success: function (data) {
                
                $("#multipledataview").html(data);
            },
            error: function (xhr, status, error) {
                // Handle errors
            }
        });
    })

    $("#btnMultiService").on('click', function () {        
        document.getElementById('singleservicediv').style.display = 'none';
        document.getElementById('multipleservicediv').style.display = 'block';
    })

    $(document).ready(function () {
        $('#DepartmentDropdwon').change(function () {

            var Department_Id = $(this).val();
            console.log("Selected department ID: " + Department_Id);
            // Your AJAX call or other logic here
            $.ajax({
                url: '/ServiceMaster/GetBYDepartmentIdWiseServicedData',
                type: 'GET',
                data: { Department_Id: Department_Id },
                success: function (data) {
                    PopulateSubProductDropDown("#serviceheaddropdown", data)
                },
                error: function (xhr, status, error) {
                    // Handle errors
                }
            });
        });
    });

    function PopulateSubProductDropDown(dropDownId, list, selectedId) {
        $(dropDownId).empty();
        $(dropDownId).append("<option value='0'>Select</option>")
        $.each(list, function (index, row) {
            $(dropDownId).append("<option value='" + row.value + "'>" + row.text + "</option>")
        });
    }
    

    $(document).ready(function () {
        
        $('#serviceheaddropdown').change(function () {
            var ServiceHead_Id = $(this).val();
            var Patient_Id = $("#UHID").val();
            localStorage.setItem("Patient_Id", Patient_Id);
            $('#Patient_Id').val(Patient_Id);
            console.log("Selected serviceHead ID: " + ServiceHead_Id);
            // Your AJAX call or other logic here
            $.ajax({
                url: '/ServiceMaster/GetByServiceHeadIdWiseServicedData',
                type: 'GET',
                data: { ServiceHead_Id: ServiceHead_Id },
                success: function (data) {

                    PopulateSubProductDropDown("#ServiceDropdwon", data);
                    $.ajax({
                        url: '/ConsultantPatient/PatientServiceMasterDetails',
                        type: 'GET',
                        data: { serviceHead_Id: ServiceHead_Id },
                        success: function (data) {
                            $("#multipledataview").html(data);

                        },
                        error: function (xhr, status, error) {
                            // Handle errors
                        }
                    });
                },
                error: function (xhr, status, error) {
                    // Handle errors
                }
            });
        });
    });

    function PopulateSubProductDropDown(dropDownId, list, selectedId) {        
        $(dropDownId).empty();
        $(dropDownId).append("<option value='0'>Select</option>")
        $.each(list, function (index, row) {
            $(dropDownId).append("<option value='" + row.value + "'>" + row.text + "</option>")
        });
    }

    function getServiceChargesList() {
        
        var Service_Id = $("#ServiceDropdwon").val();

        // Your AJAX call or other logic here
        $.ajax({
            url: '/ServiceMaster/GetServiceCharges',
            type: 'GET',
            data: { Service_Id: Service_Id },
            success: function (data) {
                $("#Charges").val(data.charges);               
            },
            error: function (xhr, status, error) {
                // Handle errors
            }
        });
    }

    function calculateAmountsSingle() {        
        var Charges = parseFloat($('#Charges').val());
        var discount = parseFloat($('#Discount').val());

        if (isNaN(discount)) {
            // If the discount value is NaN, set it to 0
            discount = 0;
        }

        // Calculate the total amount
        var totalAmount = Charges - discount;

        // Update the TotalAmount textbox with the calculated value
        $('#NetAmount').val(totalAmount.toFixed(2));
    }



    $('#checkId').click(function () {
        
        $('.checkId').prop('checked', this.checked)
    });
</script>